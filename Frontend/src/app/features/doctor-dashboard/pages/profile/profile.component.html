<section *ngIf="statusCode()!=406 " class="relative pt-24 pb-24 md:mx-5">
  <img
    src="https://images.unsplash.com/photo-1636955840493-f43a02bfa064?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
    alt="medical-cover-image" class="w-full absolute top-0 z-0 rounded-md left-0 h-50 object-cover">
  <div class="flex bg-white   border border-gray-200 absolute top-0 right-0 items-center gap-4">
    <div class="flex items-center bg-gradient-to-r  p-3 rounded-xl">
      <span class="text-3xl font-bold text-gray-800">{{doctor()?.rating}}</span>
      <div class="ml-2">
        <ng-container *ngIf="doctor() as doc">
          <div class="flex text-yellow-400" *ngIf="doc.rating != null">
            <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
              <i class="bx " [ngClass]="{
                'bxs-star': doc.rating >= i,
                'bxs-star-half': doc.rating >= i - 0.5 && doc.rating < i,
                'bx-star': doc.rating < i - 0.5
              }"></i>
            </ng-container>
          </div>
        </ng-container>
        <p class="text-sm text-gray-500">{{reviews()?.count}} verified reviews</p>
      </div>
    </div>
  </div>
  <div class="w-full  py-4 border-stone-200 max-w-7xl mx-auto px-2  ">
    <div class="flex flex-col z-20  items-center md:items-start justify-center px-4  max-h-[500px]  ">

      <div
        class="flex items-center  z-20 relative  justify-center size-28 rounded-full border-2 border-red-500          ">
        <div
          class="items-center flex absolute top-1 size-7 cursor-pointer left-1 justify-center rounded-lg bg-white shadow-sm">
          <i class='bx bx-camera text-xl text-pink-600'></i>
        </div>
        <img class="rounded-full size-25 ounded-full" [src]="doctor()?.profilePicture" loading="lazy" alt="">

      </div>
      <div class="flex items-center justify-between w-full  mt-2">
        <div class="flex items-center gap-2 ">
          <p class="text-xl text-black   font-medium">{{doctor()?.firstName}} {{doctor()?.lastName}}</p>
          <i class='bx bxl-slack-old text-[18px] text-blue-500'></i>
        </div>

      </div>
      <div class=" flex  flex-wrap justify-center md:items-center gap-2 mt-2  text-slate-800">
        <div class="flex items-center space-x-1 ">
          <i class='bx bxs-envelope text-pink-600 text-[18px]'></i>
          <p class="text-sm  font-medium">{{doctor()?.email}}</p>
        </div>
        <div class="flex items-center space-x-1 ">
          <i class='bx bx-credit-card-alt text-[18px]'></i>
          <p class="text-sm  font-medium">{{doctor()?.licenseNumber}}</p>
        </div>
        <div class="flex items-center space-x-1 ">
          <i class='bx bxs-credit-card text-[18px]'></i>
          <p class="text-sm  font-medium">{{doctor()?.defaultExaminationFee | number}} EGP</p>
        </div>


      </div>
      <div class="w-[100%] bg-white rounded-xl my-2 py-2">
        <div class="py-1 flex items-center justify-between">
          <h2 class="text-[14px] px-4  py-0.5 bg-[#eee] text-black  font-semibold text-gray-800">About Me</h2>
          <p routerLink="/doctor-dashboard/settings" class="text-[14px] cursor-pointer ext-blue-500">Edit Info</p>
        </div>
        <p class="text-[15px]">{{doctor()?.aboutMe}}</p>
      </div>
    </div>
  </div>


  <!-- <app-dashboard-stats-card [cards]=" [
    {
      icon: 'bxs-group',
      title: 'Total Doctors',
      subTitle: 15,
    },
    {
      icon: 'bx-bed',
      title: 'Total patients',
      subTitle: 20000
    },
    {
      icon: 'bx-pulse',
      title: 'Total Clinics',
      subTitle: 500,
    },
    {
      icon: 'bx-clinic',
      title: 'Total Appointments',
      subTitle: 100,
    },
    ]"></app-dashboard-stats-card> -->

  <div class="grid grid-cols-1 md:grid-cols-2  ">
    <!-- Professional Profile Section -->
    <div class="bg-white  px-2 md:px-4 pt-4 pb-3  border border-gray-200 duration-300">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl  flex items-center gap-3">
          <i class='bx bx-briefcase text-black text-xl'></i>
          Professional Profile
        </h2>
        <div class="flex items-center gap-2">
          <span
            class="px-4 py-1.5 bg-gradient-to-r from-blue-500 to-blue-200 text-gray-50 rounded-full text-sm font-medium">
            {{doctor()?.experienceYears}}+ Years Experience
          </span>
        </div>
      </div>

      <div class="space-y-2">
        <div
          class="flex border border-stone-200  items-center gap-4 p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200">
          <i class='bx bx-medal text-2xl text-blue-500'></i>
          <div>
            <h3 class="text-sm font-semibold text-gray-600">Qualification</h3>
            <p class="text-gray-800 font-medium">{{doctor()?.qualification}}</p>
          </div>
        </div>

        <div
          class="flex border border-stone-200  items-center gap-4 p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200">
          <i class='bx bx-map-pin text-2xl text-green-500'></i>
          <div>
            <h3 class="text-sm font-semibold text-gray-600">Practice Location</h3>
            <p class="text-gray-800 font-medium">{{doctor()?.address}}</p>
          </div>
        </div>

        <div
          class="flex border border-stone-200  items-center gap-4 p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200">
          <i class='bx bx-phone text-2xl text-purple-500'></i>
          <div>
            <h3 class="text-sm font-semibold text-gray-600">Contact Number</h3>
            <p class="text-gray-800 font-medium">{{doctor()?.phoneNumber}}</p>
          </div>

        </div>
        <div
          class="flex border border-stone-200 items-center gap-4 p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200">
          <i class='bx bx-message-square-detail text-2xl text-orange-500'></i>
          <div>
            <h3 class="text-sm font-semibold text-gray-600">About Me</h3>
            <p class="text-gray-800 font-medium">{{doctor()?.aboutMe}}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Detailed Information Section -->
    <div class="bg-white px-2 md:px-4 pt-4 pb-3 border border-stone-200 duration-300">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl  flex items-center gap-3">
          <i class='bx bx-info-circle text-xl text-blue-600'></i>
          Personal Details
        </h2>
      </div>

      <div class="space-y-4">
        <div class="p-4 border border-stone-200  bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <h3 class="text-sm font-semibold text-gray-600">Date of Birth</h3>
              <p class="text-gray-800 font-medium mt-1">{{doctor()?.dateOfBirth | date:'mediumDate'}}</p>
            </div>
            <div>
              <h3 class="text-sm font-semibold text-gray-600">Gender</h3>
              <p class="text-gray-800 font-medium mt-1 capitalize">{{doctor()?.gender}}</p>
            </div>
          </div>
        </div>

        <div class="p-4 border border-stone-200 bg-stone-100 rounded-xl">
          <h3 class="text-sm font-semibold text-gray-600 mb-2">Consultation Fees</h3>
          <div class="grid  grid-cols-2 gap-4">
            <div class="bg-white border border-stone-200 p-3 rounded-lg">
              <p class="text-sm text-gray-600">Regular Fee</p>
              <p class="text-lg font-bold text-pink-600">{{doctor()?.defaultExaminationFee | number}} EGP</p>
            </div>
            <div class="bg-white border border-stone-200 p-3 rounded-lg">
              <p class="text-sm text-gray-600">Online Consultation</p>
              <p class="text-lg font-bold text-pink-600">{{doctor()?.defaultConsultationFee | number}} EGP</p>
            </div>
          </div>
        </div>

        <div class="p-4 bg-gradient-to-r from-green-50 to-teal-50 rounded-xl">
          <h3 class="text-sm font-semibold text-gray-600 mb-2">Professional Details</h3>
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm text-gray-600">License Number</p>
              <p class="text-gray-800 font-medium">{{doctor()?.licenseNumber}}</p>
            </div>
            <i class='bx bx-check-shield text-3xl text-green-500'></i>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div *ngIf="statusCode()!=404" class="bg-white px-4 pt-4 pb-3 border border-gray-200 mt-4 rounded-xl">
    <div class="flex items-center px-2 md:px-4 justify-between mb-6">
      <h2 class="text-xl flex items-center gap-3">
        Patient Reviews & Feedback
      </h2>
      <div class="flex items-center gap-4">
        <div class="flex items-center bg-gradient-to-r  p-3 rounded-xl">
          <span class="text-3xl font-bold text-gray-800">{{doctor()?.rating}}</span>
          <div class="ml-2">
            <ng-container *ngIf="doctor() as doc">
              <div class="flex text-yellow-400" *ngIf="doc.rating != null">
                <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
                  <i class="bx " [ngClass]="{
                    'bxs-star': doc.rating >= i,
                    'bxs-star-half': doc.rating >= i - 0.5 && doc.rating < i,
                    'bx-star': doc.rating < i - 0.5
                  }"></i>
                </ng-container>
              </div>
            </ng-container>
            
            
            <p class="text-sm text-gray-500">{{reviews()?.count}} verified reviews</p>
          </div>
        </div>
      </div>
    </div>

    <div class="space-y-4">

      <div class="" *ngFor="let review of reviews()?.data">
        <div class="border border-gray-200 rounded-xl p-4 hover:bg-gray-50 transition-colors duration-200">
          <div class="flex items-center gap-4 mb-3">
            <img [src]="review.patientImage" alt="Patient" class="w-12 h-12 rounded-full border-2 border-pink-200">
            <div>
              <h3 class="font-medium text-gray-800">{{review.patientName}}</h3>
              <div class="flex items-center">
                <div class="flex text-yellow-400">
                  <ng-container *ngFor="let i of [1,2,3,4,5]">
                    <i class='bx' [ngClass]="{
                      'bxs-star': review.rating >= i,
                      'bxs-star-half': review.rating > i-1 && review.rating < i,
                      'bx-star': review.rating < i-0.5
                    }"></i>
                  </ng-container>
                </div>
                <span class="text-sm text-gray-500 ml-2">{{review.rating}}</span>
                <span class="text-xs text-gray-400 ml-2">Verified Patient</span>
              </div>
            </div>
            <span class="text-sm text-gray-500 ml-auto">{{review.createdAt | date}}</span>
          </div>
          <p class="text-gray-600 leading-relaxed">{{review.comment}}.</p>

        </div>

      </div>

      <div class="text-center pt-4">
        <button
          class="px-6 py-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-full transition-colors duration-200 font-medium">
          View All Reviews
          <i class='bx bx-right-arrow-alt inline-block ml-1'></i>
        </button>
      </div>
    </div>
  </div>
  <div *ngIf="statusCode()==404 " class="flex items-center flex-col  justify-center mt-5  ">
    <img class="size-70" src="https://cdni.iconscout.com/illustration/premium/thumb/no-review-8316266-6632286.png"
      loading="lazy" alt="No reviews found">
    <p class="text-gray-700 text-center max-w-2xl">
      No reviews have been submitted yet. Be the first to share your experience with this doctor!
      We value patient feedback to help improve our services.
      <a routerLink="/doctor-dashboard/settings" class=" cursor-pointer text-sm text-blue-500 mx-2">Go In Account</a>
    </p>
  </div>
</section>


<div *ngIf="statusCode()==406 " class="flex items-center flex-col  justify-center mt-5  ">
  <img class="size-70" src="../../../../assets/5.svg" loading="lazy" alt="">
  <p class="text-gray-700 text-center max-w-2xl">
    Hi Doctor! To continue, please take a moment to complete your profile. This helps us provide the best experience for
    you and your patients
    <a routerLink="/doctor-dashboard/settings" class=" cursor-pointer text-sm text-blue-500 mx-2">Go In Account</a>
  </p>
</div>